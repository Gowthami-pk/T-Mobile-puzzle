<form class="tp-form" [formGroup]="stockPickerForm">
  <mat-form-field class="tp-full-width">
    <mat-label>stocks symbol</mat-label>
    <input type="text" placeholder="Symbol e.g AAPL" autocomplete="off"
           aria-label="stocks symbol" matInput formControlName="symbol"
      value=""/>
    <mat-error><span
        *ngIf="
          !stockPickerForm.get('symbol').valid &&
          stockPickerForm.get('symbol').touched">Please enter a symbol</span>
    </mat-error>
  </mat-form-field>

  <mat-form-field>
    <mat-label>From Date</mat-label>
    <input matInput [matDatepicker]="pickerFromDate" [max]="max" formControlName="fromDate" (change)="dateSelection($event)">
    <mat-datepicker-toggle matSuffix [for]="pickerFromDate"></mat-datepicker-toggle>
    <mat-datepicker #pickerFromDate></mat-datepicker>
  </mat-form-field>

  <mat-form-field>
    <mat-label>To Date </mat-label>
    <input matInput [matDatepicker]="pickerToDate" [max]="max"
           [min]="stockPickerForm.controls['fromDate'].value" formControlName="toDate">
    <mat-datepicker-toggle matSuffix [for]="pickerToDate"></mat-datepicker-toggle>
    <mat-datepicker #pickerToDate></mat-datepicker>
    <mat-error *ngIf="stockPickerForm.controls['toDate'].invalid">
      Please select to Date after your From date.
    </mat-error>
  </mat-form-field>

  <button (click)="fetchQuote()" mat-button [disabled]="stockPickerForm.invalid" mat-raised-button>Go</button>
</form>

<coding-challenge-chart [data$]="quotes$" [title]="'Stocks'"></coding-challenge-chart>
